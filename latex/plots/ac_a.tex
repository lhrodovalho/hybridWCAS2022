%\tikzsetnextfilename{ac_a}
\begin{tikzpicture}

\begin{scope}[shift={(0.0cm,-0.0cm)}]
\begin{semilogxaxis}[
%	xlabel={Frequency [Hz]},
	ylabel={Differential gain [dB]},
	xmin=1e3, xmax=1e12,
	ymin=-70, ymax=50,
	xtick={1e3,1e6,1e9,1e12},
	ytick={-60,-40,-20,0,20,40},
	%        yticklabel style={/pgf/number format/.cd,fixed,fixed zerofill,precision=0},
	legend pos=south west,
	legend columns=1,
	width  = 6.0cm,
	height = 5.0cm    
	]
	
	\addplot [
	color=red,
	no marks,
	mark repeat = 6,
	mark phase = 1,
	solid
	]
	table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{1}, col sep=comma]
	{./data/ac_df_av.csv};
	\addlegendentry{Nauta}
	
	\addplot [
	color=blue,
	no marks,
	mark repeat = 6,
	mark phase = 1,
	dashed
	]
	table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{3}, col sep=comma]
	{./data/ac_df_av.csv};
	\addlegendentry{Barth}
	
	\addplot [
	color=green,
	no marks,
	mark repeat = 6,
	mark phase = 1,
	dotted
	]
	table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{5}, col sep=comma]
	{./data/ac_df_av.csv};
	\addlegendentry{Manf}
	
\end{semilogxaxis}
\end{scope}

\begin{scope}[shift={(0.0cm,-4.0cm)}]	
	\begin{semilogxaxis}[
%		xlabel={Frequency [Hz]},
		ylabel={Phase [Â°]},
		xmin=1e3, xmax=1e12,
		ymin=-45, ymax=225,
		xtick={1e3,1e6,1e9,1e12},
		ytick={180,90,0},
		%        yticklabel style={/pgf/number format/.cd,fixed,fixed zerofill,precision=0},
		legend pos=south west,
		legend columns=1,
		width  = 6.0cm,
		height = 5.0cm    
		]
		
		\addplot [
		color=red,
		no marks,
		mark repeat = 6,
		mark phase = 1,
		solid
		]
		table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{1}, col sep=comma]
		{./data/ac_df_ph.csv};
		\addlegendentry{Nauta}
		
		\addplot [
		color=blue,
		no marks,
		mark repeat = 6,
		mark phase = 1,
		dashed
		]
		table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{3}, col sep=comma]
		{./data/ac_df_ph.csv};
		\addlegendentry{Barth}
		
		\addplot [
		color=green,
		no marks,
		mark repeat = 6,
		mark phase = 1,
		dotted
		]
		table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{5}, col sep=comma]
		{./data/ac_df_ph.csv};
	\addlegendentry{Manf}
		
\end{semilogxaxis}
\end{scope}

\begin{scope}[shift={(0.0cm,-8.0cm)}]	
\begin{semilogxaxis}[
    xlabel={Frequency [Hz]},
    ylabel={Common-mode gain [dB]},
    xmin=1e3, xmax=1e12,
	ymin=-70, ymax=50,
	xtick={1e3,1e6,1e9,1e12},
	ytick={-60,-40,-20,0,20,40},
%        yticklabel style={/pgf/number format/.cd,fixed,fixed zerofill,precision=0},
    legend pos=north east,
    legend columns=1,
    width  = 6.0cm,
    height = 5.0cm    
]

\addplot [
    color=red,
    no marks,
    mark repeat = 6,
    mark phase = 1,
    solid
    ]
    table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{1}, col sep=comma]
	{./data/ac_cm_av.csv};
\addlegendentry{Nauta}

\addplot [
	color=blue,
	no marks,
	mark repeat = 6,
	mark phase = 1,
	dashed
]
	table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{3}, col sep=comma]
	{./data/ac_cm_av.csv};
\addlegendentry{Barth}

\addplot [
	color=green,
	no marks,
	mark repeat = 6,
	mark phase = 1,
	dotted
	]
	table [each nth point={1}, x expr=\thisrowno{0}, y expr=\thisrowno{5}, col sep=comma]
	{./data/ac_cm_av.csv};
\addlegendentry{Manf}

\end{semilogxaxis}
\end{scope}

\end{tikzpicture}
